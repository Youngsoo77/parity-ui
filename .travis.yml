sudo: false
language: node_js
node_js:
  - '5'

env:
  global:
    - CXX=g++-4.8
    - REPO_SLUG=ethcore/eth-node-status-page
    # SAUCE_ACCESS_KEY
    - secure: Dp5tL4NBgMz2Ux8xUQl/mRUstZ7TNLcy8sx5OyUUkae0hsfvEH8HqOF74ole2bCToH0e9UWVhur76ohRaJRd/vMeQTJ34Ak16XKIzXhJM3uMGAsoEe3lwQwJZSKzBhF40CYV/kgoq8ygjbIqLWoPktBMW39KJrIsu3Jq1Z/eNr+QPFNcaCuEu2/G8gqRGmqrWYQ/4ZBexi4sZx7r8ENuIhU90l9+AOFL3nx0BeEfV6h595znYF0YnXunvSCNxXBYa0MKqViDnoVcFZwgzO2ERTmsVp2rwrk7ryP+Ja3yW+yxu7O8GmD2Y/Tk/ftbDCcEI6h4lZLP4yaM6D64B9MVTE3LTIn0V7Q5kh+cxW/bnJt/3T+QZaDVzxxo3LZM/W3JPY2bS+lu+HhEUwXm7izXFzJysDssuE592NYgihbJ/RSZo9G6/p5G+av4OumFJJbY6NldAJxw/pTnFEu62i+iBQMFhv/bQ16Jx8X5YxV/JQ2sHUce5hbbRqPF0gkHNlgHN+BxA8iLE4o1X8pMPB1bPFgiDAsINygvZyCtgmM0gUdFP3RYKghlXqCMP5PAKm/kFWOnxIuqGbHOKsolLwzG+uUzfO1bGigRq3LdfwQFV4h9j2qbm48wEomFOwGxI3VopXSfFi/zZHYHTrk0L9cIU3TWvJbfkeYqYs/wMmguiD8=

    # GITHUB_TOKEN with public repo access
    - secure: dZW1Auq9n4L4pw/BJO1/IU1MO9CCMk3xzm/UIqatVX+R6W51lHBysxGW7vfHntyBbaOJxcX/RA/SE6+JeSujqkXad137bJBhwsWv4GrjeCrSwF/1hd0/uk0KtFJ5uEmOWckBRE9qw5VeRm7RrwH4tw/q+juJjZTjWLXQIYm3QXDtDFDQQ0/Pe1YaCya/CeTOOfJ+Sk/cSdFmNPqTP+RXt3oi8bUlrkXk5/oIbl+rrMZWHVv75zEQZQbdRg3YniCunGQk0gpshpkvcf0N6A9s7f7wz12wCQoErOSap6kvoUyVNO+27OrSOsLAZAe9z8IXNvthnef8/6kEdyzMUQAMg32tkw0Dtuo3ZLcYouLKQsiwO7zRgOGIaZreEfcA90XV3Sv7PKxURJRR/pfqDHNwpi3OmlcJVASWc+FrH1rauo2E31OVvP2XSeRhT2yxUXpfhBB983W9JF6WsAFUKhwVYg+be7yaokfBUEb7uJd1BafLsIOa+qm/NpxhgkzHM/cB+z8CbUEDdSz6+ZxEv0QT2jt7QnLgD6L1aRRfV8B74DA5D2SP6dE2YMWkxCDMTUZkhDcaijNdN5HoilW3sdW4Zk9MSGzlU7j5amvQ+B3YFcFwFiNHq0ZlwJ/Yi6/ijSZCXN0u0N/GFpBiht1ixL3mhQmVRgOrrQlKXs0QK2nkdoI=

matrix:
  include:
  - env: SCRIPT=lint
  - env: SCRIPT=testOnce
  - env: SCRIPT=nightwatchCI
    addons:
      sauce_connect: true

cache:
  directories:
    - node_modules

before_script:
  - if [ "$SCRIPT" == "nightwatchCI" ]; then npm run startTest & fi
  - if [ "$SCRIPT" == "nightwatchCI" ]; then sleep 25; fi

script: npm run $SCRIPT

after_success:
  - ./scripts/deploy-to-gh-pages.sh
